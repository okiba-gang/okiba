var OkibaDragEmitter=function(){"use strict";function o(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var o=n[e];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function n(t,n,e){return n&&i(t.prototype,n),e&&i(t,e),t}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function u(t,n){return(u=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function r(t,n){return!n||"object"!=typeof n&&"function"!=typeof n?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):n}var t=function(){function t(){o(this,t),this.hs={}}return n(t,[{key:"on",value:function(t,n){(this.hs[t]||(this.hs[t]=new Map)).set(n,n)}},{key:"off",value:function(t,n){this.hs[t]&&this.hs[t].delete(n)}},{key:"emit",value:function(t,n){this.hs&&this.hs[t]&&this.hs[t].forEach(function(t){return t(n)})}},{key:"hasListeners",value:function(t){return this.hs.hasOwnProperty(t)&&0<this.hs[t].size}},{key:"destroy",value:function(){var n=this;Object.keys(this.hs).forEach(function(t){return n.hs[t].clear()}),delete this.hs}}]),t}();function a(t){return void 0===t?t:t instanceof Array?t:t.callee||t instanceof NodeList||t instanceof DOMTokenList||t instanceof HTMLCollection?Array.prototype.slice.call(t):[t]}function h(t,n,e,o,i){if(!n||!e)return!1;for(var s=a(t),u=a(n),r=a(e),h=0;h<s.length;++h)for(var c=0;c<u.length;++c)s[h]["".concat(o,"EventListener")](u[c],r[Math.min(c,r.length-1)],i);return!0}function c(t,n,e,o){return h(t,n,e,"add",o)}function l(t,n,e,o){return h(t,n,e,"remove",o)}return function(){function e(t){var n;return o(this,e),(n=r(this,s(e).call(this))).el=t,n.autoBind(),n.listen(),n}return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&u(t,n)}(e,t),n(e,[{key:"destroy",value:function(){this.unlisten(),this.el=null}},{key:"setPointerDown",value:function(t){var n=t.clientX,e=t.clientY;this.pointerX=n,this.pointerY=e,this.isPointerDown=!0,this.el.classList.add("is-pointer-down")}},{key:"setPointerUp",value:function(){this.isPointerDown&&(this.isPointerDown=!1,this.pointerX=this.pointerY=null,this.el.classList.remove("is-pointer-down"),this.emit("dragend"))}},{key:"setPointerPos",value:function(t,n){this.isPointerDown&&this.emitDrag(t,n),this.pointerX=t,this.pointerY=n}},{key:"emitDrag",value:function(t,n){this.emit("drag",{deltaX:this.pointerX-t,clientX:t,deltaY:this.pointerY-n,clientY:n})}},{key:"onTouchStart",value:function(t){this.setPointerDown(t.touches[0])}},{key:"onTouchMove",value:function(t){this.setPointerPos(t.touches[0].clientX,t.touches[0].clientY)}},{key:"onTouchEnd",value:function(){this.setPointerUp()}},{key:"onMouseDown",value:function(t){this.setPointerDown(t)}},{key:"onMouseMove",value:function(t){this.setPointerPos(t.clientX,t.clientY)}},{key:"onMouseUp",value:function(){this.setPointerUp()}},{key:"listen",value:function(){c(this.el,"touchstart",this.onTouchStart),c(window,"touchmove",this.onTouchMove),c(window,"touchend",this.onTouchEnd),c(this.el,"mousedown",this.onMouseDown),c(window,"mousemove",this.onMouseMove),c(window,"mouseup",this.onMouseUp)}},{key:"unlisten",value:function(){l(this.el,"touchstart",this.onTouchStart),l(window,"touchmove",this.onTouchMove),l(window,"touchend",this.onTouchEnd),l(this.el,"mousedown",this.onMouseDown),l(window,"mousemove",this.onMouseMove),l(window,"mouseup",this.onMouseUp)}},{key:"autoBind",value:function(){this.onTouchStart=this.onTouchStart.bind(this),this.onTouchMove=this.onTouchMove.bind(this),this.onTouchEnd=this.onTouchEnd.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.onMouseMove=this.onMouseMove.bind(this),this.onMouseUp=this.onMouseUp.bind(this)}}]),e}()}();
